graph TD
    A["ğŸš€ Session Start"] --> B{"ğŸ“„ SESSION-PLAN.md<br/>Exists?"}
    
    B -->|No| C["ğŸ“ Create New Plan<br/>AI Interview + Date Validation<br/>Document Goals & Approach<br/>Apply Session Lens (4-6 items)"]
    B -->|Yes| D["ğŸ“‹ Load Existing Plan<br/>Check Previous Status<br/>Update Session Goals<br/>Focus on Current Phase"]
    
    C --> E["ğŸ“‹ Check Context<br/>CURRENT-STATE-SNAPSHOT.md<br/>PROBLEM-SOLVING-PATTERNS.md<br/>WORKING-RELATIONSHIP-DNA.md"]
    D --> E
    
    E --> F["ğŸ’» Active Collaboration<br/>Session Lens Monitoring<br/>(4-6 focused items only)"]
    
    F --> G{"ğŸ¯ Trigger Events<br/>(Reduced Payload Tax)"}
    
    G --> H["ğŸ“ˆ Major Milestone"] 
    G --> I["ğŸ”„ Approach Deviation<br/>(with date validation)"]
    G --> J["ğŸ’¡ New Pattern Discovery"]
    G --> K["ğŸŒŸ Blog-Worthy Insight"]
    G --> L["ğŸ§© Problem-Solving Win"]
    G --> M["âœ… Task Completion<br/>(Auto-checkbox)"]
    
    H --> N["ğŸ“ Update<br/>CURRENT-STATE-SNAPSHOT.md"]
    I --> O["ğŸ“ Update<br/>SESSION-PLAN.md (Deviations)<br/>+ DEVIATION-TRACKING-PROTOCOL.md<br/>+ Date Validation"]
    J --> P["ğŸ“ Update<br/>WORKING-RELATIONSHIP-DNA.md"]
    K --> Q["ğŸ“ Update<br/>BLOG-LEARNING-MOMENTS.md<br/>(with date validation)"]
    L --> R["ğŸ“ Update<br/>PROBLEM-SOLVING-PATTERNS.md"]
    M --> S["ğŸ“ Auto-Check<br/>SESSION-PLAN.md Checkboxes<br/>(Focused scope only)"]
    
    N --> T["ğŸ”„ Continue Session<br/>(~900 tokens overhead)"]
    O --> T
    P --> T
    Q --> T
    R --> T
    S --> T
    
    T --> G
    
    F --> U["ğŸ Session End"]
    U --> V["ğŸ“‹ Final Updates<br/>Archive to SESSION-PLAN-ARCHIVE/<br/>Update CURRENT-STATE-SNAPSHOT.md<br/>Validate all timestamps"]
    
    V --> W["âœ… Session Complete<br/>Intelligence Preserved<br/>Next Session Ready<br/>(67% efficiency gain)"]
    
    classDef startEnd fill:#ffffff,stroke:#0d47a1,stroke-width:3px,color:#000000
    classDef process fill:#f8f9fa,stroke:#4a148c,stroke-width:3px,color:#000000
    classDef trigger fill:#fff8e1,stroke:#e65100,stroke-width:3px,color:#000000
    classDef update fill:#f1f8e9,stroke:#1b5e20,stroke-width:3px,color:#000000
    
    class A,W startEnd
    class B,C,D,E,F,U,V process
    class G,H,I,J,K,L,M trigger
    class N,O,P,Q,R,S,T update